<link rel="import" href="./../localize-behavior.html">

<link rel="import" href="../../d2l-colors/d2l-colors.html">
<link rel="import" href="../../d2l-typography/d2l-typography-shared-styles.html">
<link rel="import" href="../../d2l-save-status/d2l-save-status.html">

<dom-module id="d2l-rubric-editor-header">
	<template strip-whitespace>
		<style include="d2l-rubric-editor-cell-styles">
			#title {
				@apply --d2l-heading-1;
				margin-top: 0;
			}
			:dir(rtl) #rubric-editor-header {
				text-align: right;
			}

			#rubric-editor-header-content {
				display: flex;
				justify-content: space-between;
				flex-wrap: wrap;
				margin-right: var(--d2l-rubric-editor-gutter-width); /* ie11 fix */
				margin-right: calc(var(--d2l-rubric-editor-gutter-width));
			}

			:dir(rtl) #rubric-editor-header-content {
				margin-right: 0;
				margin-left: var(--d2l-rubric-editor-gutter-width); /* ie11 fix */
				margin-left: calc(var(--d2l-rubric-editor-gutter-width));
			}

			#header-end-container {
				margin-top: auto;
				margin-bottom: auto;
				min-height: 1.2rem;
				height: 100%;
			}

			#editor-save-status {
				display: inline-block;
			}
		</style>
		<div id="rubric-editor-header">
				<div id="rubric-editor-header-content">
					<template is="dom-if" if="[[isSinglePageRubric]]">
						<div id="title">[[_title]]</div>
					</template>
					<div id="header-end-container">
						<d2l-save-status id="editor-save-status"></d2l-save-status>
				</div>
			</div>
	</template>
	<script>
		Polymer({
			is: 'd2l-rubric-editor-header',
			properties: {
				/**
				* The user access token
				*/
				token: {
					type: Object,
				},
				isSinglePageRubric: {
					type: Boolean,
					value: false,
				},
				rubricName: {
					type: String,
					value: null,
				},
				_title: {
					type: String,
					computed: '_getTitle(rubricName)',
				},
			},
			behaviors: [
				D2L.PolymerBehaviors.Rubric.LocalizeBehavior,
			],
			onEntitySave: function(e) {
				var saveStateEl = this.$['editor-save-status'];
				({
					'd2l-siren-entity-save-start': function() { saveStateEl.start(); },
					'd2l-siren-entity-save-end': function() { saveStateEl.end(); },
					'd2l-siren-entity-save-error': function() { saveStateEl.error(); }
				})[e.type]();
			},
			_getTitle: function(rubricName) {
				return 'Edit Rubric - ' + rubricName;
			},
		});
	</script>
</dom-module>
